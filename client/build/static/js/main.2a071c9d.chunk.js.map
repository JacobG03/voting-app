{"version":3,"sources":["components/Navbar.module.css","components/LoginForm.module.css","App.module.css","services/api_calls.js","components/polls/CreatePoll.jsx","components/polls/Polls.jsx","components/LoginForm.jsx","components/Navbar.jsx","App.js","index.js","components/polls/Polls.module.css","components/polls/CreatePoll.module.css"],"names":["module","exports","api","getData","endpoint","a","fetch","method","mode","credentials","then","r","json","data","status","body","response","postData","headers","JSON","stringify","CreatePollForm","props","useForm","register","handleSubmit","unregister","className","styles","form","onSubmit","new_data","topic","key","push","rerenderPolls","prev","displayPoll","console","log","fields","placeholder","required","Options","finish","onClick","type","submit","value","useState","options","setOptions","map","option","Option","id","addBtn","length","delBtn","filtered","filter","removeOption","CreatePoll","main","top","src","user","avatar","alt","username","Poll","votes","votesNum","setVotesNum","poll","PollAuthor","url","author_url","timestamp","options_url","poll_votes","useEffect","reqPoll","useCallback","index","setVotes","voted","setVoted","votes_url","AllowVote","ShowVotes","display","setDisplay","option_avatars","vote","option_votes","option_body","obj","msg","author","setAuthor","Polls","polls","setPolls","rpolls","LoginForm","errors","formState","setUser","displayForm","email","password","switch","changeForm","last","RegisterForm","minLength","maxLength","Form","Navbar","signout","navbar","content","action","signin","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2a071c9d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__31-FB\",\"content\":\"Navbar_content__qaagy\",\"signin\":\"Navbar_signin__3U__V\",\"action\":\"Navbar_action__678mY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"LoginForm_form__2a8w7\",\"switch\":\"LoginForm_switch__3MoTp\",\"submit\":\"LoginForm_submit__2fOIw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__16ZpL\",\"content\":\"App_content__3La4L\"};","const api = 'https://voting-app2.herokuapp.com/api'\n\nexport async function getData(endpoint) {\n  const response = await fetch(api + endpoint, {\n    method: 'GET',\n    mode: 'cors',\n    credentials: 'same-origin',\n  })\n  .then(r => r.json().then(data => ({status: r.status, body:data})))\n  return response;\n}\n\n\nexport async function postData(endpoint, data={}) {\n  const response = await fetch(api + endpoint, {\n    method: 'POST',\n    mode: 'cors',\n    credentials: 'same-origin',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(data)\n  })\n  .then(r => r.json().then(data => ({status: r.status, body:data})))\n  return response;\n}","import styles from './CreatePoll.module.css'\nimport { useState } from 'react'\nimport { useForm } from \"react-hook-form\";\nimport { postData } from '../../services/api_calls';\n\n\nfunction CreatePoll (props) {\n  // * make a navbar shortcut to display this too\n  // callback function Success to hide this component\n  return (\n    <div className={styles.main}>\n      <div className={styles.top}>\n        <img src={props.user.avatar} alt='User' />\n        <span>{props.user.username}</span>\n      </div>\n      <CreatePollForm rerenderPolls={props.rerenderPolls} displayPoll={props.displayPoll} />\n    </div>\n  )\n}\n\nfunction CreatePollForm (props) {\n  const { register, handleSubmit, unregister } = useForm();\n  const onSubmit = data => {\n    var new_data = {\n      'topic': data.topic,\n      'options': []\n    }\n\n    for (const key in data) {\n      if (key !== 'topic') {\n        new_data['options'].push(data[key])\n      }\n    }\n\n    postData('/polls', new_data)\n    .then(data => {\n      if (data.status === 200) {\n        props.rerenderPolls(prev => !prev)\n        props.displayPoll(false)\n      } else {\n        console.log(data.body)\n      }\n    })\n  }\n\n\n  return (\n    <form className={styles.form} onSubmit={handleSubmit(onSubmit)}>\n      <div className={styles.fields}>\n        <span>Topic:</span>\n        <input placeholder='Topic' {...register(\"topic\", {required: true})} />\n      </div>\n      <Options unregister={unregister} register={register}/>\n      \n      <div className={styles.finish}>\n        <span onClick={() => props.displayPoll(prev => !prev)}>Cancel</span>\n        <input type=\"submit\" className={styles.submit} value='Create Poll'/>\n      </div>\n    </form>\n  );\n}\n\nfunction Options(props) {\n  const [options, setOptions] = useState([])\n\n  const addOption = () => {\n    setOptions(prev => [...prev, {\n      'id': options.length\n    }])\n  }\n\n  return (\n    <div className={styles.options}>\n      {options.map(option => <Option unregister={props.unregister} options={options} setOptions={setOptions} option={option} key={option.id} register={props.register}/>)}\n      <button className={styles.addBtn} onClick={() => addOption()}>Add Option</button>\n    </div>\n  )\n}\n\nfunction Option(props) {\n  const removeOption = () => {\n    var filtered = props.options.filter(function(option) { return option !== props.option; }); \n    props.unregister(`option-${props.option.id}`)\n    props.setOptions(filtered)\n  }\n\n  return (\n    <div className={styles.option}>\n      <input placeholder={`Option ${props.option.id}`} {...props.register(`option-${props.option.id}`, { required: true })} />\n      <button className={styles.delBtn} onClick={() => removeOption()}>-</button>\n    </div>\n  )\n}\n\nexport default CreatePoll;","import styles from './Polls.module.css'\nimport {\n  useEffect,\n  useState,\n  useCallback\n} from 'react'\nimport { getData, postData } from '../../services/api_calls'\n\n\nfunction Polls (props) {\n  const [polls, setPolls] = useState(null)\n  \n  useEffect(() => {\n    getData('/polls')\n    .then(data => {\n      if (data.status === 200) {\n        setPolls(data.body)\n      }\n    })\n  }, [props.user, props.rpolls])\n\n\n  if (!polls) {\n    return null;\n  }\n\n  return (\n    <div className={styles.polls}>\n      {polls.map(poll => <Poll key={poll.id} data={poll} user={props.user}/>)}\n    </div>\n  )\n}\n\n\nfunction Poll (props) {\n  const data = props.data;\n  const [votesNum, setVotesNum] = useState(data.votes)\n\n  return (\n    <div className={styles.poll}>\n      <PollAuthor url={data.author_url} />\n      <span className={styles.timestamp}>{data.timestamp}</span>\n      <div className={styles.topic}>\n        <span>{data.topic}</span>\n      </div>\n      <Options url={data.options_url} user={props.user} setVotesNum={setVotesNum}/>\n      <span className={styles.poll_votes}>{votesNum}</span>\n    </div>\n  )\n}\n\n\nfunction Options (props) {\n  const [options, setOptions] = useState(null)\n\n  useEffect(() => {\n    getData(props.url)\n    .then(data => setOptions(data.body))\n  }, [props.url])\n\n  const reqPoll = useCallback(() => {\n    getData(props.url)\n    .then(data => {\n      setOptions(null) // to force rerender components\n      setOptions(data.body)\n      props.setVotesNum(prev => prev + 1)\n    })\n  }, [props])\n\n  if (!options) {\n    return null;\n  }\n\n  return (\n    <div className={styles.options}>\n      {options.map(option => \n      <Option \n        key={option.index} \n        data={option}\n        reqPoll={reqPoll}\n        user={props.user}\n      />)}\n    </div>\n  )\n}\n\n\nfunction Option (props) {\n  const [votes, setVotes] = useState(null)\n  const [voted, setVoted] = useState(false)\n  const data = props.data;\n  // Depending on votes request status return \n  // either ability to vote or votes\n  useEffect(() => {\n    if (props.user) {\n      getData(data.votes_url)\n      .then(data => {\n        if (data.status === 202) {\n          // let user vote\n          setVotes(true)\n        } else if (data.status === 200) {\n          // display votes\n          setVotes(data.body.votes)\n          setVoted(data.body.voted)\n        }\n      })\n    }\n  }, [props.user, data.votes_url])\n\n\n  // if user anonymous\n  if (votes === null) {\n    return (\n      <div className={styles.option}>\n        <span>{data.body}</span>\n      </div>\n    )\n  }\n  // if user hasnt voted yet\n  if (votes === true) {\n    return <AllowVote data={data} reqPoll={props.reqPoll}/>\n  }\n  // show votes\n  return <ShowVotes data={data} votes={votes} voted={voted}/>\n}\n\n\n// displays users avatars that voted\nfunction ShowVotes (props) {\n  const [display, setDisplay] = useState(false)\n  const data = props.data;\n\n  if (!display) {\n    return (\n      <div \n        className={`${styles.option} ${props.voted ? styles.voted : null}`}\n        onClick={() => setDisplay(!display)}\n      >\n        <div className={styles.option_body}>\n          <span>{data.body}</span>\n        </div>\n        <div className={styles.option_votes}>\n          {props.votes.length}\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div \n      className={`${styles.option} ${props.voted ? styles.voted : null}`}\n      onClick={() => setDisplay(!display)}\n    >\n      <div className={styles.option_avatars}>\n        {props.votes.length > 0 ? props.votes.map(vote => <img src={vote.avatar} key={vote.username} alt='user'/>): <span>No votes</span>}\n      </div>\n      <div className={styles.option_votes}>\n        {props.votes.length}\n      </div>\n    </div>\n  )\n}\n\n\nfunction AllowVote (props) {\n  const data = props.data;\n  const form = {'anonymous': false}\n\n  const vote = () => {\n    postData(data.votes_url, form)\n    .then(obj => console.log(obj.body.msg))\n    // refresh poll\n    props.reqPoll()\n  }\n\n  return (\n    <div \n      className={`${styles.option} ${styles.vote}`}\n      onClick={() => vote()}\n    >\n      <span>{data.body}</span>\n    </div>\n  )\n}\n\n\nfunction PollAuthor (props) {\n  const [author, setAuthor] = useState(null)\n\n  useEffect(() => {\n    getData(props.url)\n    .then(data => {\n      if (data.status === 200) {\n        setAuthor(data.body)\n      }\n    })\n  }, [props.url])\n\n  if (!author) {\n    return null;\n  }\n\n  return (\n    <div className={styles.author}>\n      <img src={author.avatar} alt='Avatar' />\n      <span>{author.username}</span>\n    </div>\n  )\n}\n\n\n\n\nexport default Polls;","import styles from './LoginForm.module.css'\nimport { useState } from 'react'\nimport { useForm } from \"react-hook-form\";\nimport { getData, postData } from '../services/api_calls';\n\n\nfunction Form (props) {\n  const [form, changeForm] = useState(false)\n\n  if (!form) {\n    return <LoginForm \n      setUser={props.setUser} \n      displayForm={props.displayForm}\n      changeForm={changeForm}\n    />\n  }\n  return <RegisterForm changeForm={changeForm} />\n}\n\n\nfunction LoginForm (props) {\n  const { register, handleSubmit, formState: { errors } } = useForm();\n  const onSubmit = data => {\n    postData('/login', data)\n    .then(obj => {\n      if (obj.status === 200) {\n        getData('/user')\n        .then(obj => {\n          if(obj.status === 200) {\n            props.setUser(obj.body)\n            props.displayForm(false)\n          }\n        })\n      }\n    })\n  };\n\n  return (\n    <form className={styles.form} onSubmit={handleSubmit(onSubmit)}>\n      <div>\n        <span>Login:</span>\n        <input placeholder='Login' {...register(\"email\", {required: true})} />\n        {errors.email && <span>This field is required</span>}\n        <span>Password:</span>\n        <input placeholder='Password' type='password' {...register(\"password\", { required: true })} />\n        {errors.password && <span>This field is required</span>}\n      </div>\n      \n      <input type=\"submit\" className={styles.submit} value='Sign In'/>\n      <span \n        className={styles.switch}\n        onClick={() => props.changeForm(last => !last)}\n      >\n        Register\n      </span>\n    </form>\n  );\n}\n\n\nfunction RegisterForm (props) {\n  const { register, handleSubmit, formState: { errors } } = useForm();\n  const onSubmit = data => {\n    postData('/register', data)\n    .then(obj => {\n      if (obj.status === 200) {\n        console.log(obj.body)\n        props.changeForm(form => !form)\n      } else {\n        console.log(obj.body)\n      }\n    })\n  };\n\n  return (\n    <form className={styles.form} onSubmit={handleSubmit(onSubmit)}>\n      <div>\n        <span>Username:</span>\n        <input placeholder='Username' {...register(\"username\", {required: true, minLength: 3, maxLength: 64})} />\n        <span>Login:</span>\n        <input placeholder='Email or just a string' {...register(\"email\", {required: true, minLength: 1, maxLength: 128})} />\n        <span>Password:</span>\n        <input placeholder='Password' type='password' {...register(\"password\", { required: true , minLength: 3, maxLength: 256})} />\n        {errors.password && <span>This field is required</span>}\n        <span>Repeat Password:</span>\n        <input placeholder='Repeat Password' type='password' {...register(\"password2\", { required: true , minLength: 3, maxLength: 256})} />\n        <span>Avatar:</span>\n        <input placeholder='URL: [PNG, JPG, GIF]' {...register(\"avatar\", { required: true })} />\n      </div>\n      <input type=\"submit\" className={styles.submit} value='Sign Up'/>\n      <span className={styles.switch} onClick={() => props.changeForm(last => !last)}>Login</span>\n    </form>\n  );\n}\n\nexport default Form;","import styles from './Navbar.module.css'\nimport { useCallback } from 'react'\nimport { getData } from '../services/api_calls'\n\n\nfunction Navbar(props) {\n\n  const signout = useCallback(() => {\n    getData('/logout')\n    .then(obj => {\n      if (obj.status === 200) {\n        props.setUser(false)\n      }\n    })\n  }, [props])\n  \n  if (!props.user) {\n    return (\n      <nav className={styles.navbar}>\n        <div className={styles.content}>\n          <span>{'<Voting App>'}</span>\n          <button \n            className={styles.signin}\n            onClick={() => props.displayForm(form => !form)}\n          >\n            Sign in\n          </button>\n        </div>\n      </nav>\n    )\n  }\n\n  return (\n    <nav className={styles.navbar}>\n      <div className={styles.content}>\n        <span>{'<Voting App>'}</span>\n        <div className={styles.action}>\n          {props.user ? <button \n            className={styles.signin}\n            onClick={() => props.displayPoll(prev => !prev)}\n          >\n            Create Poll\n          </button>: null}\n          <button \n            className={styles.signin}\n            onClick={() => signout()}\n          >\n            Sign out\n          </button>\n        </div>\n      </div>\n    </nav>\n  )\n}\n\nexport default Navbar;","import styles from  './App.module.css';\nimport {\n  useEffect,\n  useState\n} from 'react';\nimport { getData } from './services/api_calls';\nimport CreatePoll from './components/polls/CreatePoll';\nimport Polls from './components/polls/Polls';\nimport Form from './components/LoginForm';\nimport Navbar from './components/Navbar';\n\n\nfunction App() {\n  const [user, setUser] = useState(null)\n  // for login/register form\n  const [form, displayForm] = useState(false)\n  // for creating poll form\n  const [poll, displayPoll] = useState(false)\n\n  const [rpolls, rerenderPolls] = useState(false)\n\n  // Get user object if user is logged in else null\n  useEffect(() => {\n    getData('/user')\n    .then(obj => {\n      if(obj.status === 200) {\n        setUser(obj.body)\n      } else {\n        console.log('User is anonymous')\n      }\n    })\n  }, [])\n\n  return (\n    <div className={styles.App}>\n      <Navbar \n        user={user}\n        setUser={setUser}\n        displayForm={displayForm}\n        displayPoll={displayPoll}\n      />\n      <div className={styles.content}>\n        {form ? <Form setUser={setUser} displayForm={displayForm}/>: null}\n        {user && poll ? <CreatePoll user={user} rerenderPolls={rerenderPolls} displayPoll={displayPoll} />: null}\n        <Polls user={user} rpolls={rpolls}/>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"polls\":\"Polls_polls__1lS4d\",\"poll\":\"Polls_poll__1aHj7\",\"author\":\"Polls_author__2Y645\",\"topic\":\"Polls_topic__S9NdO\",\"timestamp\":\"Polls_timestamp__36Hh_\",\"options\":\"Polls_options__mDcop\",\"option\":\"Polls_option__1xedI\",\"vote\":\"Polls_vote__XIMus\",\"voted\":\"Polls_voted__3OnM-\",\"poll_votes\":\"Polls_poll_votes__KqdhZ\",\"option_body\":\"Polls_option_body__1bFLU\",\"option_votes\":\"Polls_option_votes__3tslH\",\"option_avatars\":\"Polls_option_avatars__3ncQa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"CreatePoll_main__21y3u\",\"top\":\"CreatePoll_top__BaGLz\",\"form\":\"CreatePoll_form__2aajv\",\"fields\":\"CreatePoll_fields__1_FGR\",\"finish\":\"CreatePoll_finish__125dg\",\"submit\":\"CreatePoll_submit__Ujss4\",\"options\":\"CreatePoll_options__rYrbt\",\"option\":\"CreatePoll_option__3RxLF\",\"addBtn\":\"CreatePoll_addBtn__215TB\",\"delBtn\":\"CreatePoll_delBtn__Pb3Ye\"};"],"sourceRoot":""}